version: "1.0"
specification:
  name: box
  summary: Conduit connector for the box content management system.
  description: |
    ## API Reference

    * https://developer.box.com/reference

    ## Destination

    The Box Destination takes a Conduit record and uploads it to the remote box directory.

    ### Create, Update and Snapshot Operations

    The box destination connector uploads the records in 3 different ways.

    * For a file which is <= 4MB the uploads the single record file by simple box upload endpoint.
    * For a file which is >= 4MB and <= 20MB, it keeps the file records in memory and once the last
      record is appended it uploads it using the simple box upload endpoint.
    * For a file which is > 20MB, it uploads the file using chunk upload endpoint. It first creates
      a new session for chunk upload which gives session id and part size in response. Using this
      session id and part size the records are then uploaded. It prepares the parts by keeping
      them in memory and upload the parts one by one using chunk upload endpoint.

    ### Delete Operation

    Box destination connector delete a record using MetadataFileName.
  version: v0.1.0
  author: Meroxa, Inc.
  destination:
    parameters:
      - name: token
        description: Token is used to authenticate API access.
        type: string
        default: ""
        validations:
          - type: required
            value: ""
      - name: parentID
        description: ID of the Box directory to read/write files. Default is 0 for root directory.
        type: string
        default: "0"
        validations: []
      - name: sdk.batch.delay
        description: Maximum delay before an incomplete batch is written to the destination.
        type: duration
        default: "0"
        validations: []
      - name: sdk.batch.size
        description: Maximum size of batch before it gets written to the destination.
        type: int
        default: "0"
        validations:
          - type: greater-than
            value: "-1"
      - name: sdk.rate.burst
        description: |-
          Allow bursts of at most X records (0 or less means that bursts are not
          limited). Only takes effect if a rate limit per second is set. Note that
          if `sdk.batch.size` is bigger than `sdk.rate.burst`, the effective batch
          size will be equal to `sdk.rate.burst`.
        type: int
        default: "0"
        validations:
          - type: greater-than
            value: "-1"
      - name: sdk.rate.perSecond
        description: Maximum number of records written per second (0 means no rate limit).
        type: float
        default: "0"
        validations:
          - type: greater-than
            value: "-1"
      - name: sdk.record.format
        description: |-
          The format of the output record. See the Conduit documentation for a full
          list of supported formats (https://conduit.io/docs/using/connectors/configuration-parameters/output-format).
        type: string
        default: opencdc/json
        validations: []
      - name: sdk.record.format.options
        description: |-
          Options to configure the chosen output record format. Options are normally
          key=value pairs separated with comma (e.g. opt1=val2,opt2=val2), except
          for the `template` record format, where options are a Go template.
        type: string
        default: ""
        validations: []
      - name: sdk.schema.extract.key.enabled
        description: Whether to extract and decode the record key with a schema.
        type: bool
        default: "true"
        validations: []
      - name: sdk.schema.extract.payload.enabled
        description: Whether to extract and decode the record payload with a schema.
        type: bool
        default: "true"
        validations: []
